# 一.I/O模型

## 1.使用同步IO模型实现的Reactor模式的工作流程

> 以epoll_wait为例

* 主线程往epoll内核事件表中注册socket上的读就绪事件
* 主线程调用epoll_wait等待socket上有数据可读
* 当socket上有数据可读时，epoll_wait通知主线程。主线程将socket可读事件放入请求队列
* 睡眠在请求队列上的某个工作线程被唤醒，它从socket读取数据，并处理客户请求，然后往epoll内核事件表中注册该socket上的写就绪事件
* 主线程调用epoll_wait通知主线程。主线程将socket可写事件放入请求队列
* 睡眠在请求队列上的某个工作线程被唤醒，它往socket上写入服务器处理客户请求的结果

## 2.如何理解阻塞非阻塞与同步异步的区别

* 同步和异步关注的是消息通讯机制
    - 所谓同步，就是在发出一个调用时，在没有得到结果之前，该调用就不返回。但是一旦调用返回，就得到返回值了。换句话说，就是由调用者主动等待这个调用的结果
    - 而异步则是相反，调用在发出之后，这个调用就直接返回了，所以没有返回结果。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在调用发出后，被调用者通过状态、通知来通知调用者，或通过回调函数处理这个调用
* 阻塞和非阻塞关注的是程序在等待调用结果（消息，返回值）时的状态
    - 阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回
    - 非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程

[怎样理解阻塞非阻塞与同步异步的区别？](https://www.zhihu.com/question/19732473)
